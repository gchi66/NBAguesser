<h1>Welcome to the NBA player guessing game!</h1>


<%= simple_form_for :season, url: root_path, :html => { :remote => true, :method => :get } do |f| %>
  <%= f.input :season, collection: (1950..2023).to_a.reverse.map(&:to_s), prompt: 'Select a season' %>
  <%= f.button :submit, 'Play!' %>
<% end %>

<% if params[:commit].present? && params[:season].present? && params[:season][:season].present? %>
  <h4>Selected Season: <%= params[:season][:season] %></h4>
<% elsif params[:commit].present? %>
  <h4>Please select a season</h4>
<% end %>


<h1>Who is this player?</h1>
<div class="player-card">
  <% if @correct_player %>
    <p>Team: <span class="stat"><%= @correct_player[:team] %></span></p>
    <p>Points: <span class="stat"><%= @correct_player[:points] %></span></p>
    <p>Rebounds: <span class="stat"><%= @correct_player[:rebounds] %></span></p>
    <p>Assists: <span class="stat"><%= @correct_player[:assists] %></span></p>
  <% end %>
</div>

<h1>Choose from these four!</h1>


<% combined_players = @guess_players + [@correct_player] %>
<% combined_players.shuffle.compact.each do |player| %>
  <div class="player-card">
    <% if player[:image_url]&.present? %>
      <%= image_tag(player[:image_url], alt: "Player Image") %>
    <% else %>
      <p>No Image Available</p>
    <% end %>
    <h2><%= player[:name] %></h2>
  </div>
<% end %>



<%= link_to "Try again!", root_path, class: "button-main"%>
